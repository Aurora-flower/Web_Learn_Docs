# HTTP 

## 定义
    HTTP 是超文本传输协议，是应用层的协议，是客户端与服务端之间通讯的协议。
    HTTP 数据的传递是基于 TCP\IP 协议的传输，TCP 是传输层协议，IP 是应用层协议。

## TCP\IP
    TCP/IP 协议在互联网传输层上实现了可靠的数据传输，
    确保数据能够按照正确的顺序传输并且不会丢失或损坏。

* IP 协议解决了在互联网中如何准确地将数据包从源主机传输到目标主机的问题。

* TCP 协议解决了网络通信中的可靠传输问题。（"如何传递数据及接收发送端发送的所有的数据包，且数据排列顺序与发送数据的顺序保持一致"

## 长连接与短连接
    HTTP 是无状态的协议，服务端不知道客户端的状态。
    无状态不意味着 HTTP 无法保持客户端与服务端之间的连接。

### 1. HTTP 协议不同版本的连接
1. HTTP 1.0 中默认是短连接的，每一次客户端与服务端进行 HTTP 操作时，都会重新建立连接，数据传输完成则连接中断。


2. HTTP 1.1 中默认是长连接的，使用长连接的情况下，客户端和服务器端之间用于传输数据的 TCP 连接不会关闭， 客户端再次访问服务器时，会继续使用已经建立的连接。它可以减少TCP连接建立和断开的开销，提高网络性能。

### 2. 长连接的实现
    长连接的客户端实现是通过在请求头上添加 Connection: Keep-Alive。

* 服务器实现： 
  * 服务器端需要设置 HTTP 头部信息来控制 HTTP 连接的保持时间。
    常见的有 Connection: Keep-Alive 和 Keep-Alive: timeout=xx（单位为秒）两种方式。


* 客户端实现：
  * 客户端在发送 HTTP 请求时，需要在 HTTP 头部信息中添加 Connection: Keep-Alive， 表示支持 HTTP 长连接。如果不想使用 HTTP 长连接，可以使用 Connection: close 表示 TCP 连接关闭。
  对于频繁请求资源的客户端，适合使用长连接。客户端一般不会主动关闭连接。
  短连接对于服务端管理较为简单，存在的连接都是有用的，不需要额外的控制手段。

### 3. 长连接的缺点
    虽然 HTTP 长连接可以提高网络性能，但是长时间的 TCP 连接会占用一定的网络资源。
    如果不被及时关闭，可能会引起网络拥塞等问题。
    需要设置合适的保持时间，以免占用过多 TCP 连接资源。

    客户端越多，连接越多，服务端需要采取一些策略，
    关闭一些长时间没有请求发生的连接，避免恶意连接，导致服务端受损。